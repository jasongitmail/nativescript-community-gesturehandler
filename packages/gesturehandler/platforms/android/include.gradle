import groovy.json.JsonSlurper
dependencies {
    implementation(name:'widgets-release', ext:'aar')
    implementation "androidx.annotation:annotation:1.1.0"
}
repositories {
    def appDir = "$rootDir/../../.."
    def widgetsDir = "$appDir/node_modules/@nativescript/core/platforms/android"
    def appPackageJsonFile = file("$appDir/package.json")
    if (appPackageJsonFile.exists()) {
        def appPackageJson = new JsonSlurper().parseText(appPackageJsonFile.text)
        if (appPackageJson.dependencies['@akylas/nativescript'] != null) {
            widgetsDir = "$appDir/node_modules/@akylas/nativescript/platforms/android"
        }
    }
    flatDir {
        dirs "$widgetsDir"
    }
}